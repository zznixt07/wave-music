{% extends 'base.html' %}
{% load static %}

{% block title %}
    Login - My Site
{% endblock title %}

{% block inline_css %}
    <style >
        
    </style>
{% endblock inline_css %}

{% block external_css %}
    <link rel="stylesheet" type="text/css" href="{% static 'account/css/styles.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'account/css/errors.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
{% endblock external_css %}

{% block content %}
    <div class="main">
        <section class="center">     
            <form action="" method="POST" novalidate>
                {% csrf_token %}
                {% comment %}{% include 'messages.html' %}{% endcomment %}
                {% comment %}{{ form.as_p }}{% endcomment %}
                
                <div class="text-center starting-info">
                    <h2>Login</h2>
                    <p>
                        Not Registered Yet? <a href="{% url 'account:signup' %}">Sign Up</a>
                    </p>
                </div>
                <ul>
                    <li>
                        {{ form.email.label_tag }}
                        {{ form.email }}
                        <small>{{ form.email.errors }}</small>
                    </li>
                    <li>
                        {{ form.username.label_tag }}
                        {{ form.username }}
                        <small>{{ form.username.errors }}</small>
                    </li>
                    <li>
                        {{ form.password.label_tag }}
                            <div class="password">
                                {{ form.password }}
                                <i class="toggle-pswd ri-eye-line"></i>
                            </div>
                        <div>
                        <small>{{ form.password.errors }}</small>
                    </li>
                    
                    <li id="chkbox">
                        {{ form.remember_me.label_tag }}
                        {{ form.remember_me }}
                        <small>{{ form.remember_me.errors }}</small>
                    </li>
                    <li class="submit-btn">
                        <input type="submit" value="Login">
                    </li>
                </ul>
            </form>
            <div class="half-side-image">
                <img src="{% static 'account/imgs/3.jpg' %}">
            </div>
        </section>
    </div>
{% endblock content %}

{% block bottom_js %}
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    <script type="text/javascript">

        // returns the added class else undefined.
        function toggleClass(elem, cls1, cls2) {
            classes = elem.classList
            if (Array.from(classes).indexOf(cls1) !== -1) {
                classes.remove(cls1)
                classes.add(cls2)
                return cls2
            }
            // below: using if is different than using else
            else {
                classes.remove(cls2)
                classes.add(cls1)
                return cls1
            }
        }

        document.querySelectorAll('.password').forEach((elem) => {
            const toggleBtn = elem.querySelector('.toggle-pswd')
            toggleBtn.onclick = () => {
                const showPswdClass = 'ri-eye-line'
                const hidePswdClass = 'ri-eye-off-line'
                const addedClass = toggleClass(toggleBtn, showPswdClass, hidePswdClass)
                if (addedClass === showPswdClass) {
                    elem.querySelector('input').type = 'password'
                }
                else {
                    elem.querySelector('input').type = 'text'
                }

            }
        })
    </script>
{% endblock bottom_js %}